diff --git a/MagickCore/composite.c b/MagickCore/composite.c
index 78d6dff..9d986f6 100644
--- a/MagickCore/composite.c
+++ b/MagickCore/composite.c
@@ -663,7 +663,8 @@ MagickExport MagickBooleanType CompositeImage(Image *image,
             if (traits == UndefinedPixelTrait)
               continue;
             if (source_traits != UndefinedPixelTrait)
-              SetPixelChannel(image,channel,p[i],q);
+              SetPixelChannel(image,channel,GetPixelChannel(source_image,
+                channel,p),q);
             else if (channel == AlphaPixelChannel)
               SetPixelChannel(image,channel,OpaqueAlpha,q);
           }
@@ -2513,7 +2514,8 @@ MagickExport MagickBooleanType TextureImage(Image *image,const Image *texture,
           if ((traits == UndefinedPixelTrait) ||
               (texture_traits == UndefinedPixelTrait))
             continue;
-          SetPixelChannel(image,channel,p[i],q);
+          SetPixelChannel(image,channel,GetPixelChannel(texture_image,
+            channel,p),q);
         }
         p+=GetPixelChannels(texture_image);
         q+=GetPixelChannels(image);