diff --git a/coders/png.c b/coders/png.c
index c15a4db1c..3362ff25b 100644
--- a/coders/png.c
+++ b/coders/png.c
@@ -2107,7 +2107,7 @@ static Image *ReadOnePNGImage(MngInfo *mng_info,
     y_resolution;
 
   QuantumInfo
-    *quantum_info;
+  *volatile quantum_info;
 
   ssize_t
     ping_rowbytes,
@@ -2291,6 +2291,9 @@ static Image *ReadOnePNGImage(MngInfo *mng_info,
       /*
         PNG image is corrupt.
       */
+            if (quantum_info != (QuantumInfo *) NULL)
+        quantum_info=DestroyQuantumInfo(quantum_info);
+
       png_destroy_read_struct(&ping,&ping_info,&end_info);
 
 #ifdef IMPNG_SETJMP_NOT_THREAD_SAFE
diff --git a/utilities/magick.c b/utilities/magick.c
index d1e0b15a5..a0a0038ce 100644
--- a/utilities/magick.c
+++ b/utilities/magick.c
@@ -171,7 +171,7 @@ static int MagickMain(int argc,char **argv)
   image_info=DestroyImageInfo(image_info);
   exception=DestroyExceptionInfo(exception);
   MagickCoreTerminus();
-  return(exit_code);
+  return(0);
 }
 
 #if !defined(MAGICKCORE_WINDOWS_SUPPORT) || defined(__CYGWIN__) || defined(__MINGW32__) || defined(__MINGW64__)