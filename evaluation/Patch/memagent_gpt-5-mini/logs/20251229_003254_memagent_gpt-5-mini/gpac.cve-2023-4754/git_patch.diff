diff --git a/src/scene_manager/swf_parse.c b/src/scene_manager/swf_parse.c
index f4b974aab..dc9dbd51c 100644
--- a/src/scene_manager/swf_parse.c
+++ b/src/scene_manager/swf_parse.c
@@ -1425,18 +1425,22 @@ static GF_Err swf_def_font(SWFReader *read, u32 revision)
 
 		count = swf_get_16(read);
 		ft->nbGlyphs = count / 2;
-		offset_table = (u32*)gf_malloc(sizeof(u32) * ft->nbGlyphs);
-		offset_table[0] = 0;
-		for (i=1; i<ft->nbGlyphs; i++) offset_table[i] = swf_get_16(read);
+		if (ft->nbGlyphs) {
+			offset_table = (u32*)gf_malloc(sizeof(u32) * ft->nbGlyphs);
+			if (!offset_table) return GF_OUT_OF_MEM;
+			offset_table[0] = 0;
+			for (i=1; i<ft->nbGlyphs; i++) offset_table[i] = swf_get_16(read);
 
-		for (i=0; i<ft->nbGlyphs; i++) {
-			swf_align(read);
-			e = swf_seek_file_to(read, start + offset_table[i]);
-			if (e) break;
-			swf_parse_shape_def(read, ft, 0);
+			for (i=0; i<ft->nbGlyphs; i++) {
+				swf_align(read);
+				e = swf_seek_file_to(read, start + offset_table[i]);
+				if (e) break;
+				swf_parse_shape_def(read, ft, 0);
+			}
+			gf_free(offset_table);
+			if (e) return e;
 		}
-		gf_free(offset_table);
-		if (e) return e;
+
 	} else if (revision==1) {
 		SWFRec rc;
 		Bool wide_offset, wide_codes;