diff --git a/src/njs_vmcode.c b/src/njs_vmcode.c
index ef0beb5..21ae07e 100644
--- a/src/njs_vmcode.c
+++ b/src/njs_vmcode.c
@@ -1058,11 +1058,18 @@ njs_vmcode_array(njs_vm_t *vm, u_char *pc)
             value = array->start;
             length = array->length;
 
-            do {
+            /*
+             * If the array is a non-fast (slow) array, array->start may be
+             * NULL and array->length can be 0. The original do/while loop
+             * executed the body at least once which caused a write through
+             * a NULL pointer. Use a while loop that checks length before
+             * writing to avoid NULL dereference when length == 0.
+             */
+            while (length != 0) {
                 njs_set_invalid(value);
                 value++;
                 length--;
-            } while (length != 0);
+            }
 
         } else {
             /* Array of the form [], [,,1], [1,2,3]. */