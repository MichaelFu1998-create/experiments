diff --git a/xmlIO.c b/xmlIO.c
index 80390f4b..f54f793e 100644
--- a/xmlIO.c
+++ b/xmlIO.c
@@ -279,6 +279,7 @@ xmlEscapeText(const xmlChar *string, int flags) {
     while (*cur != 0) {
         const xmlChar *base;
         const char *repl;
+        char tempBuf[12];
         size_t used;
         size_t replSize;
         size_t unescapedSize;
@@ -315,7 +316,6 @@ xmlEscapeText(const xmlChar *string, int flags) {
                 cur += 1;
             }
         } else {
-            char tempBuf[12];
             int val = 0, len = 4;
 
             val = xmlGetUTF8Char(cur, &len);